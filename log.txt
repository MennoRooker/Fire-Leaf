A global overview of changes can be found in changelog.txt

The first thing I changed in the code was to change Dark
and Dragon type moves to physical moves and Ghost to be
special. There are 2 lines of code (include/battle.h[475])
that I changed to implement this change. This was an easy,
non-invasive step in order to test the workings of decomps.

I changed a lot of moves to be more viable and less 
annoying to use. Expecially the HMs, though I intend to
remove the need for them altogether down the road.

I changed all (or most) species to have a 50/50 gender
ratio. Breeding needs to be balanced regardless of species.

I changed around some of the pokemon stats and some types
and abilities to make certain pokémon more viable/enjoyable.
No over-the-top changes, just making some of the useless
ones usable.

I changed some of the learnsets to reflect the move changes
and to make more pokémon viable.

I added the move Quiver Dance into the game, I needed to
find the necessary files to change. First, define the move
in moves.h (include/constants/moves.h), make sure increase 
MOVES_COUNT by 1. Since Quiver Dance has a unique effect of 
increasing 3 seperate stats I needed to define a new move 
effect as well in battle_move_effects.h. The new effect 
called EFFECT_QUIVER_DANCE is defined there, but the logic
is written in battle_scripts_1.s (data). The order in which 
battle effects are written matters! If .4byte of Quiver Dance
is defined at the end of of the struct, the method needs to 
be at the end of the script.

I also changed the effect of growth to be both atk and
spatk boosting. I added a new effect for AttackSpAtkUp
that can be re-used if I want to add the move Work-Up
later down the line. Once everything is defined you can 
just add the moves to the learnsets of Pokémon. I still
need to add custom animations for Growth and Quiver Dance.

I added pokémon variety in the first few routes and I changed
some of the parties of trainers in the first area: Viridian
Forest. The trainer_parties.h file had some trainers distri-
buted randomly throughout the file. I relocated the first
few routes in order of encountering the trainers and I intend
to keep this pattern up. 

IVs were calculeted using INPUT * 31 / 255 so the INPUT would
range from 0 to 255, which is ridiculous. I changed the logic
in battle_main.c to accept values from 0 to 31. 

The wild_encounters.json file generates the wild pokémon, 
but its structure also had some weird orderinig. I relo-
cated the first routes to be at the top like for the 
trainer parties, but the encounter_rate element is above
the mons array in the firered section while it is below
the array in the leafgreen section. I added a huge blank
space between the game sections. I intend to keep version
exclusives unless trading becomes an ordeal once the cart-
ridges are actually flashed. The encounter rates per slot
are defined at the top of the json file, I might want to
refactor this sometime but I'll leave it for now.

In src/battle_script_commands.c I changes line 3166 to 
increase the global exp rate by ~17% by lowering the 
divisor from /7 to /6 to accelerate the exp gain from
all pokémon and decrease grinding slightly. I also 
intend to make the lucky egg item more accessible.

I tried to get some assets for Bugsy and other Johto
gym leaders, but they're not exactly in the format I need.
Apparently I have to somehow get the exact sprites from
the .png files I found. I added bugsy.png as an overworld
sprite in the object_events directory and I got the front 
pics of all Johto gym leaders from the Team-Aquas-Assets
repo. The fan game Fire Gold has these assets as well.
I think it's smart to see if I can add an NPC on route 22 
before I add my own sprites.

In porymap I noticed that I had not changed the Viridian
City fishing encounters yet. Apparently any changes I save in
porymap will be as finite as changes made manually in the 
project folder. I changed the fishing encounters and started
editing some species info as well. Many of the bad gen 2 mons
are now buffed. I wanted to give Thick Fat to Venusaur, but I
think I also need to buff Overgrow, Blaze and Torrent if I 
want to make those viable alternatives. I changed the logic
of Overgrow, Blaze, Torrent and Swarm in pokemon.c to acti-
vate at 50% HP instead of 30%. I now want to think of abili-
ties for all the other starters so that each has a second 
ability slot that is used. I think for the 9 starter lines:

VEN: Thick Fat
BLA: Shell Armor
CHA: *Solar Power
MEG: Chlorophyll
FRA: *Strong Jaw
TYP: Flash Fire
SCE: Lightning Rod(?)
SWA: Swift Swim
BLA: Speed Boost

*I would need to implement this myself first

The weather logic in pokemon.c makes no sense. Apparently 
fire/water effects in rain are only applied to temporary
rain, whereas fire/water effects in sun are applied to
all sun conditions. I found the abilities logic in 
battle_util.c. I might change drizzle to be only temporary
and drought to be temporary as well. And sandstorm of course.

I changed the weather rain to the B_WEATHER_RAIN flag, but I
had to remove the bit-shift of the downpour effect first
in battle.h.

Apparently damage for physical and special moves are 
seperated BEFORE things like spread-damage are defined
so I need to change these things twice.

I noticed that double-battle moves deal only 50% damage
when both targets are hit, I changed it to 75%.

I made Leaf Green and the options for Oak's grandson
were RED, ASH etc. and not GARY. Was this always the
case in Leaf Green? I just started Fire Red and it had
GARY I think.

I tested Drought on Charmander and the sun didn't fade 
after 5 turns. Something is wrong, but I don't know what.
I also used ember and I DO think the damage was boosted, 
but it is not cocnlusive.

According to ChatGPT my logic was wrong in battle_util.c,
so the weather never stops. I made the statement negative
and added the gWishFutureKnock.weatherDuration = 5; state-
ment.

My logic was fine I just needed to add the FutureKnock flag.
Drought and Drizzle work as intended, need to test Sand
Stream and test spdef boost in Brock fight probably once
I've implemented it.

I got the idea to give the gym leaders increasing IVs. 3 * L,
wwhere L is the leader in order from first to eighth. So Gio-
vanni will have 3 * 8 = 24 and I'll give the E4 28 so that I 
leave space for the Champion to have max IVs. In the rival
battles before the League I'll give the rival 5 * R, where R
is the iteration of rival battles (not counting the first).

I also noticed that the rival still has the first stages 
at Cerulean, despite being lvl 18, so I changed them to
their second stages. I'll update the movesets and lvls 
later.

...actually I noticed the Abra has Teleport as its only
move so I changed it to Confusion. 

In the S.S. Anne the rival has default moves, I might have
to change the struct to a CustomMoves one.

Since the lvls don't scale as normal I may need to change
some of the rival battles. The S.S. Anne fight is only a
few lvls above the Cerulean fight.

Saw default moveset for Silph fight as well.

Apparently all E4 members are already at 30 IVs so I'll 
leave them there. I'll add IVs for each Giovanni fight. 
Since there's 3 I can just give him 8 on the first and
16 on the second.

...apparently he has 30 IVs in each stat in the first fights
and he loses them in his gym, which is beyond retarded. I'll
just have to add difficulty some other way.

I installed the poryscript essentials into my tools folder
in both pokefirered and pokeemerald. I'm following the tu-
torial on the Team Aqua's Hideout YT page on porymap and
poryscript. I made changes to the Makefile, apparently the
tutorial is 3 years old so my additions differ slightly 
from the ones in the tutorial. I can make use of the pory-
script playground if I want but I'll see if I can get the 
route 22 NPC to do what I want using just the tutorial.

I want to have Drought on Charizard, but not on Charmeleon
or Charmander, so I'll probably giove them Flame Body. I 
want Houndoom to have Flash Fire/Solar Power, but I need to
make SP first. I obviously made Dark physical which nefrs it
a bit, but it gets Shadow Ball and Solarbeam so it should 
still be a net buff overall. Plus, I upped its spd and def.

For the 50 mons reward I want to probably give the player the
Eviolite, but I'd have to add the entire item first along 
with sprites and all. I also think it would be fine if 
the National Dex was only available after the League like
in vanilla, but I still want the option to catch gen 2 & 3 
mons and have evos like Crobat and Steelix before the E4. 
I'll have to ask around how that'll work.

Maybe add Sheer Force(?)

Spent 3 hours trying to get that fuckass syntax highlighting
right in poyscripts. NOTE: Do not remove the ` from the raw`
line at the top of the script!

I finally got poryscript to work. The mapscripts syntax is
confusing, but my mapscripts for Route 2 Viridian Forest 
North Gate is an example of working code. I finally have the 
logic needed to implement the Bugsy encounter in the gate.
Now I just need to think of something for Bugsy to say and
a reason for why route 22 was closed.

I changed Psyduck and Golduck to water/psychic. I saw 
Arbok there as poison/dark and I thought about giving
it a custom ability where any jaw type move has a chance 
to poison, making its crunches and bites etc even more
powerful. I'll have to make an object of JAW_MOVES for
Strong Jaw anyway so why not.

I was working on implementing spdef and def boosts in 
sandstorm and hail for Rock and Ice types and I figured
there has to already me immunity logic for things like 
poisoning poison types and burning fire types etc. So
there has to be a way I can easily implement IS_TYPE 
variables of Rock and Ice.

I'll put the type-based logic on hold while I try to figure
out the sprites, because I want Bugsy animated properly
in the demo. It seems the picture tables in the folder
src/data/object_events/object_events_pic_tables.h have the
following format:

static const struct SpriteFrameImage sPicTable_Bugsy[] = {
    overworld_frame(gObjectEventPic_Bugsy, 4, 6, 0),
    overworld_frame(gObjectEventPic_Bugsy, 4, 6, 1),
    .
    .
    .
    .
};

where the gObjectEventPic_Bugsy needs to be defined in
src/data/object_events/object_events_graphics.h and the 
numbers indicate pixels along x, pixels along y and order
of picture in array respectively. Since my Bugsy is in a
4x4 grid instead of Wx1, I'll need to figure out how to 
get the correct frames in the correct order of the table.

According to ChatGPT the indexing of the function
overworld_frame simply continues on the next row, so I
have Bugsy's table set at the bottom of the pic_tables.
Since Bugsy's frames are at a height of 6 pixels instead 
of 4 and 4 wide instead of 2 I'll have to see if scaling
works. Now I'll add a label for the pic and pallete as
is shown in the tutorial. I'll use u32 for the pic just to
be sure.

If not for the tutorial on how to add new events to the
overworld this would be impossible so keep the steps as
they are over there.

I have Bugsy in 32x48 format, but there are no oam structs
that support this. I added a struct to base_oam.h, but I 
will keep it commented out for now and just use the existing 
32x32 structs to see what that will look like. I also don't 
want a super tall Bugsy so even if I need the full image I'll
have to compress him down a bit first.

I added all the necessities so I'll compile and wee what it
looks like when I add Bugsy to a map.

I added the sprite to porymap and all I see in a green box 
with the letter N...

I'll ask around in the discord later if anybody can help.

I approached Black Fragrant about his FireGold Johto sprites
and I'm waiting for a response. In the meantime I'll try to
implement "extremely effective" and "very ineffective" messa-
ges during battle for 4x and 0.25x damage based on typing.

Finally able to add Bugsy as a custom sprite! He's only a
head and he's huge, but that has to do with the oam tables 
I think. I'll figure out a way to shrink him and get his 
entire body in the game.

I need to actually downscale the png source somehow. 

BUGSY SPRITE FINALLY IMPLEMENTED!

Making it the same format as all other sprites is the 
easiest thing to do but it takes some steps. In GIMP:

1. Image -> Canvas Size (rescale tiles)
2. Rectangle select [R]
3. Copy image to new file
4. CTRL+SHIFT+V
5. Image -> Canvas Size (144x32)
6. Move Tool [M]
7. Back to source image
8. Repeat steps 2-3
9. Edit -> Paste As -> New Layer
10.Image -> Mode -> Indexed (16 colors)
11.Export As -> .png

With this you can keep all the pic tables and oam tables
as they were.

Now I need to update the poryscript of the VirDor North
Entrance so that Bugsy actually interacts with the player.
I also need Bugsy to block Pewter city and force the player
to run into their rival ar Route 22. The policeman should 
force the player to face north as well.

I tried to have Bugsy approach the player, but I think
I need to instance it in the mapscripts, but at least
it compiles after giving Bugsy the correct LOCALID in 
porymap.

Before I compile again with the mapscripts approach I want
make a quick list of things I intend to change before I
forget to do them:

x Give Strong Jaw to Mightyena line
x Give Bite to Poochyena at lvl 1
x Change the lvls of route 1
x Give Solar power to Charizard line
x Give Metapod and Kakuna tackle in trainer parties
x Give Ilumise Confusion in Viridian Forest trainer
x SET mode by default
x Give Bulbasaur and Ivysaur smth other than Thick Fat

I need to do the Bugsy thing with a trigger. I'll do that 
later.

First I want to add abilities. If I want to add Strong Jaw
I'll have to define an array in battle_util.c with
biting moves and I'll have to add the moves Ice Fang,
Fire Fang and Thunder Fang into the game. I defined the 
location of BITING_MOVES_END as well, but idk if I can
put it at 0xFFFF like the SOUND_MOVES_END location, since
they're in different u16 variables. I commented it out 
for now.

I think something like Solar Power is easier to implement.
I added Solar Power and Strong Jaw to the abilities.h list 
and I added these abilities to the Charizard line and the
Feraligatr line. They will do nothing, but hopefully every-
thing still compiles. I also changed Bulbasaurs and Ivy-
saurs second abilities to effect spore until they evolve
into Venusaur with Thick Fat.

Checking Charmander's summary crashes the game... I think
there needs to be some reference to the ability's name in
the summary screen. I'll work with the tutorials online to
see if I can make them work.

I added names and descriptions so at least the game doesn't
crash anymore. Now I want to go back to Bugsy.

I did just realise that Bulbasaur having Effect Spore can
be really annoying if you pick Squirtle...

Bugsy's script to Viridian Forest now works, but I'll 
have to still implement a story around it and keep the 
player from going into Pewter City until the Route 22
rival has been beaten and Bugsy's item has been obtained.

Now though, I'll update some abilities and movesets of 
early-game mons. I can generate files of wild encounters
and trainer parties, so I think I'll stop updating those
text files. I do still want to keep updating the species
info text files based on the changes I make. The learn-
sets I can do with a script again.

I changed Dark and Ghost effectiveness on steel to neutral
as it is since gen 6. 

Fixing the Bugsy cutscenes has been a nightmare. I think it 
had something to do with the LOCALID of Bugsy being reused. 
I made map-dependent LOCALIDs and things seem to work now.

I want the player to find Bugsy's net with a custom
sprite for the item within the bag, and I want Bugsy
to give the player a permanent repel item that you can
toggle on/off throughout the playthrough.

I still need to make sure Bugsy isn't there on first load
into VF and I need him to send the player back from route 
2 into the gate until the item is retrieved.

Outrage to:
x Arcanine
x Feraligatr
x Gyarados (egg)
x Flygon (egg)
x Salamence (egg)
x Tropius (egg)
x Whiscash 
x Walrein

Bugsy is fully implemented into the game with all the
relevant logic and sprites etc.

I changed the pickup table to trigger twice as often and
give the player EV reducing berries. 10% chance for each
different stat. 15% sitrus, 15% rare candy, 5% PP UP,
3% lum, 2% King's Rock.

Abilities to add:
x Snow Warning
/ Solar Power
/ Strong Jaw
- Technician (Breloom & Hitmontop)
- Harvest (Bulbasaur and Ivysaur)
- Regenerator
- Sheer force
- Magic Bounce
- Overcoat
- Prankster(maybe)
- Simple
- Contrary(maybe)
- Moxie
- Adaptability
- Iron Fist (Ledian)
- Poison Heal
- Truant(change)
- Wind Rider (Jumpluff & Shiftry)
- Physical contact moves (Flareon & Hitmonchan)

Moves to add:
x Quiver Dance
- Air Slash
- Close Combat
- Brave Bird/Dragon Ascent
- Aurora Veil
- Ice Fang
- Thunder Fang
- Fire Fang

Items to add:
- Eviolite
- Expert Belt
- Wise Glasses
- Muscle Band

SET mode and FAST text are now default. I still want to 
implement forced SET mode at some point but I want to
do it with the message and not with overriding in the 
battle scripts.

I changed the options in LG to be BLUE and GARY over GREEN
and ASH for the rival.

I changed the English text of Bugsy's net to 'BUG NET'
to display a grammatically correct sentence when you're 
picking up the net and handing it over to Bugsy. The max
length for an item name is apparently 14 characters.

I added Max to route 2. It was simple enough, I just need
to check the previous commit for reference next time I add
somebody. For Aron I just grab the commit for Max and follow
similar steps. The earliest Black Belt is in the dojo in
Saffron City. If I want to add Youri I could put him in 
earlier, or I could put him in the dojo. There is also a 
Black Belt Mike there and I can edit him to have Mike in
the game so that I don't need to add his name elsewhere. 

I want Misty to only be available after having talked to
Bill. That way we get more linearization and I can make 
her fight slightly harder.

National Dex flag checks have been removed to allow all
mons to evolve and be traded before you actually get
the National Dex.

I balanced everything up to Vermillion, but I need to 
add linearization so that you fight the rival at the
right level. I think Diglett cave needs to remain 
closed until you've beaten him though. Still need
that same kind of linearization for Cerulean.

I think for the L=fly, R=repel function I want to 
force LR mode like I did with SET mode. That way
I never need to get rid of the HELP menus, just
make sure you use L and R outside of the bag if you
want to fly/repel.

I now want to add the running shoes, but apparently they 
aren't an actual item. The game set the flag called 
FLAG_SYS_B_DASH to make the player able to move fast.
I need to set this flag earlier and let the aide give
out the Exp. Share instead. I'll then edit the aide that
gives the Exp. Share normally.

!CURRENTLY all changes are either small, global changes
or just pertaining to the first region of the game. The first
cartridge I flash will be a demo of these early game changes
before I move on to the larger scale changes.

TO DO:
x Add NPC to block route 22
x Add Bugsy
- Bugsy gives perma repel
- Custom move animations
- Instant Running Shoes
x Instant National Dex
- Get Old Rod from Old Man
- Weather defense boosts
x Gen 6 types (no fairy)
- Linearization of the gyms and routes
- Reusable TMs
- Reusable berries (if held)
- Neutralize natures in daycare
x Force SET mode
- Trick Room (?)
- Sitrus berry 25% HP
- Make EV berries usable

Online resources/tutorials:
https://github.com/pret/pokeemerald/wiki/Tutorials
https://discordapp.com/invite/cJxDDVP
https://github.com/huderlem/poryscript
https://www.youtube.com/playlist?list=PLLNv9Lq6kDmT2zNM_gz3IkUUzjT4KaC-G
https://www.youtube.com/playlist?list=PLLNv9Lq6kDmQllAMToZJDjc7WZqqO6xvD

(The aide in Pewter City that gives you the running shoes 
after you beat Brock will give you the Exp. Share instead.
He will say something like: "My colleague wanted to give 
you this after catching 50 different species, but I told
him that's ridiculous!". The Exp. Share aide from the
base game will give you some other item instead.)
